<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>cluesmash</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<script src="https://hammerjs.github.io/dist/hammer.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Montserrat', sans-serif;
  background: #cce7ff;
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1.2rem 1rem 6rem;
  color: white;
  user-select: none;
  overflow-x: hidden;
}
body.modal-open { position: fixed; width: 100%; overflow: hidden; }

#title-wrapper { margin-bottom: 0.35rem; }
#title-wrapper img { height: 34px; }

/* Tabs ‚Äî smaller */
#tabs {
  display: flex;
  gap: 0.55rem;
  margin-bottom: 0.55rem;
}
.tab {
  padding: 0.38rem 0.8rem;
  font-weight: 700;
  font-size: 0.85rem;
  border-radius: 14px;
  cursor: pointer;
  background: #fff;
  color: #000;
  border: 2px solid #000;
  box-shadow: 3px 3px 0 #000;
}
.tab.active { background: #fff2b3; }

#assessmentCounts {
  font-size: 0.9rem;
  margin-bottom: 0.3rem;
  color: #222;
}

/* Progress ‚Äî slimmer */
#progress {
  width: 90vw;
  max-width: 380px;
  height: 4px;
  background: rgba(255,255,255,0.3);
  border-radius: 3px;
  overflow: hidden;
}
#progressBar {
  height: 100%;
  width: 0%;
  background: #ffe6e6;
  transition: width 0.3s ease;
}
#progressCount {
  font-size: 0.9rem;
  margin: 0.45rem 0 0.85rem;
  color: #222;
}

/* Card */
#card {
  background: white;
  color: #222;
  border: 3px solid #000;
  border-radius: 16px;
  padding: 1rem 0.95rem;
  box-shadow: 6px 6px 0 #000;
  text-align: center;
  width: 82vw;
  max-width: 300px;
  margin: 0.6rem 0 1rem;
  min-height: 175px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  transition: transform 0.4s ease, opacity 0.4s ease;
}
#card p { margin: 0; }

.clueLine {
  font-size: 1.25rem;
  line-height: 1.35;
  font-weight: 400;
  margin-bottom: 0.85rem; /* more space before answer */
}

.answerLine {
  font-size: 1.05rem;
  margin-bottom: 0.75rem; /* more space before setter */
}

#answer {
  cursor: pointer;
  padding: 0 0.32em;
  border-radius: 6px;
  background: black;
  color: black;
  font-weight: 700;
  transition: 0.3s;
}
#answer.revealed { background: none; color: #222; }

#writer {
  font-size: 0.95rem;
  color: #555;
  margin-top: 0.25rem;
}

/* Swipe animations */
#card.swipe-left { transform: translateX(-150%) rotate(-20deg); opacity: 0; }
#card.swipe-right { transform: translateX(150%) rotate(20deg); opacity: 0; }
#card.swipe-down { transform: translateY(150%) rotate(15deg); opacity: 0; }

/* Emojis ‚Äî smaller & spaced */
#buttons {
  display: flex;
  gap: 1.45rem;        /* more spacing */
  font-size: 1.85rem; /* slightly smaller */
  align-items: center;
  margin-top: 0.1rem;
}
.emoji-btn {
  cursor: pointer;
  transition: transform 0.15s ease;
  text-shadow: 2px 2px 0 #000;
}
.emoji-btn:active { transform: scale(1.12); }

/* Bottom buttons */
#bottomButtons {
  position: fixed;
  bottom: 0;
  width: 100%;
  display: flex;
  z-index: 10;
}
#bottomButtons button {
  flex: 1;
  padding: 0.95rem;
  font-size: 0.95rem;
  font-weight: 700;
  color: white;
  border: none;
  cursor: pointer;
}
#exportBtn { background: #222; }
#resetBtn { background: #e53935; }

/* Flash */
#flashMessage {
  position: fixed;
  top: 40%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 4.2rem;
  opacity: 0;
  transition: 0.4s;
  pointer-events: none;
}
#flashMessage.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1.2);
}

/* Notes */
#noteOverlay {
  display: none;
  position: fixed;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  max-width: 320px;
  background: white;
  border-radius: 20px;
  padding: 1.5rem;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  z-index: 1000;
  border: 3px solid #000;
}
#noteText {
  width: 90%;
  height: 100px;
  font-size: 1.1rem;
  padding: 0.5rem;
  border: 2px solid #000;
  border-radius: 10px;
  resize: none;
  font-family: inherit;
}
#noteOverlay button {
  margin-top: 1rem;
  width: 100%;
  padding: 0.7rem;
  background: #222;
  color: #fff;
  border: none;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
}
</style>
</head>
<body>

<div id="title-wrapper">
  <img src="https://i.imgur.com/3cTvC1h.png" alt="logo">
</div>

<div id="tabs">
  <div class="tab" data-view="all">All</div>
  <div class="tab" data-view="stars">Stars</div>
</div>

<div id="assessmentCounts">No: 0 | Workshop: 0 | Perfect: 0</div>
<div id="progress"><div id="progressBar"></div></div>
<div id="progressCount"></div>
<div id="flashMessage"></div>

<div id="card" style="display:none;"></div>

<div id="buttons">
  <span class="emoji-btn" onclick="animateSwipe('left', () => record('No'))">‚ùå</span>
  <span class="emoji-btn" onclick="animateSwipe('right', () => record('Workshop'))">üí°</span>
  <span class="emoji-btn" onclick="animateSwipe('down', () => record('Perfect'))">‚≠ê</span>
  <span class="emoji-btn" onclick="openNote()">‚úèÔ∏è</span>
  <span class="emoji-btn" onclick="undo()">‚Ü©Ô∏è</span>
</div>

<div id="bottomButtons">
  <button id="exportBtn" onclick="exportCSV()">Download CSV</button>
  <button id="resetBtn" onclick="resetProgress()">Reset</button>
</div>

<div id="noteOverlay">
  <textarea id="noteText" placeholder="Add a note..."></textarea>
  <button onclick="saveNote()">Save</button>
</div>

<!-- JS unchanged from your last working version -->
</body>
</html>
