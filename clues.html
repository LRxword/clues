<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <title>ClueMatch</title>
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />

Â  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
Â  <script src="https://hammerjs.github.io/dist/hammer.min.js"></script>

Â  <style>
Â  Â  body {
Â  Â  Â  margin: 0;
Â  Â  Â  font-family: 'Montserrat', sans-serif;
Â  Â  Â  background: linear-gradient(135deg, #ffb07c, #ffcba4);
Â  Â  Â  min-height: 100vh;
Â  Â  Â  overflow-x: hidden;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 2rem 1rem 7rem;
Â  Â  Â  color: white;
Â  Â  Â  user-select: none;
Â  Â  }

Â  Â  h1 {
Â  Â  Â  font-size: 2.8rem;
Â  Â  Â  margin-bottom: 0.3rem;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 0.6rem;
Â  Â  Â  text-shadow: 2px 2px 6px rgba(0,0,0,0.5);
Â  Â  }

Â  Â  #title-flame {
Â  Â  Â  font-size: 3rem;
Â  Â  }

Â  Â  #instructions {
Â  Â  Â  font-size: 1.2rem;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
Â  Â  }

Â  Â  #progress {
Â  Â  Â  width: 90vw;
Â  Â  Â  max-width: 500px;
Â  Â  Â  height: 6px;
Â  Â  Â  background: rgba(255,255,255,0.3);
Â  Â  Â  border-radius: 3px;
Â  Â  Â  margin-bottom: 1.5rem;
Â  Â  Â  overflow: hidden;
Â  Â  }

Â  Â  #progressBar {
Â  Â  Â  height: 100%;
Â  Â  Â  width: 0%;
Â  Â  Â  background: #ffe6e6;
Â  Â  Â  transition: width 0.3s ease;
Â  Â  }

Â  Â  #card {
Â  Â  Â  background: white;
Â  Â  Â  color: #222;
Â  Â  Â  border-radius: 24px;
Â  Â  Â  padding: 2rem 1.5rem;
Â  Â  Â  font-size: 2.2rem;
Â  Â  Â  line-height: 1.4;
Â  Â  Â  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
Â  Â  Â  text-align: center;
Â  Â  Â  user-select: none;
Â  Â  Â  word-wrap: break-word;
Â  Â  Â  overflow-wrap: break-word;
Â  Â  Â  word-break: break-word;
Â  Â  Â  width: 90vw;
Â  Â  Â  max-width: 480px;
Â  Â  Â  margin-bottom: 2rem;

Â  Â  Â  /* Tinder-style animation */
Â  Â  Â  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  Â  opacity: 0;
Â  Â  Â  transform: translateX(100%) scale(0.85); /* Start off-screen to the right */
Â  Â  }

Â  Â  #card.enter {
Â  Â  Â  opacity: 1;
Â  Â  Â  transform: translateX(0) scale(1);
Â  Â  }

Â  Â  #card.swipe-left {
Â  Â  Â  transform: translateX(-150%) rotate(-20deg);
Â  Â  Â  opacity: 0;
Â  Â  }

Â  Â  #card.swipe-right {
Â  Â  Â  transform: translateX(150%) rotate(20deg);
Â  Â  Â  opacity: 0;
Â  Â  }

Â  Â  #card.swipe-down {
Â  Â  Â  transform: translateY(150%) rotate(15deg);
Â  Â  Â  opacity: 0;
Â  Â  }

Â  Â  #answer {
Â  Â  Â  background: black;
Â  Â  Â  color: black;
Â  Â  Â  cursor: pointer;
Â  Â  Â  user-select: none;
Â  Â  Â  padding: 0 0.4em;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  font-size: 1.6rem;
Â  Â  Â  font-weight: 700;
Â  Â  }

Â  Â  #writer {
Â  Â  Â  font-size: 1.3rem;
Â  Â  Â  color: #555;
Â  Â  Â  margin-top: 1rem;
Â  Â  }

Â  Â  #buttons {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: space-between;
Â  Â  Â  gap: 0.5rem;
Â  Â  Â  flex-wrap: nowrap;
Â  Â  Â  width: 90vw;
Â  Â  Â  max-width: 500px;
Â  Â  Â  margin-bottom: 2rem;
Â  Â  }

Â  Â  button {
Â  Â  Â  flex: 1;
Â  Â  Â  padding: 0.6rem 0.8rem;
Â  Â  Â  font-size: 1rem;
Â  Â  Â  font-weight: 600;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border: 2px solid black;
Â  Â  Â  background: white;
Â  Â  Â  color: black;
Â  Â  Â  cursor: pointer;
Â  Â  Â  box-shadow: 1px 2px 4px rgba(0,0,0,0.1);
Â  Â  Â  transition: background 0.3s;
Â  Â  }

Â  Â  #btnUndo {
Â  Â  Â  background: #ddd;
Â  Â  }

Â  Â  #exportBtn {
Â  Â  Â  position: fixed;
Â  Â  Â  bottom: 0;
Â  Â  Â  left: 0;
Â  Â  Â  width: 100%;
Â  Â  Â  max-width: 500px;
Â  Â  Â  margin: 0 auto;
Â  Â  Â  padding: 1rem;
Â  Â  Â  font-size: 1.1rem;
Â  Â  Â  border-radius: 0;
Â  Â  Â  background-color: #444;
Â  Â  Â  color: white;
Â  Â  Â  text-align: center;
Â  Â  Â  border: none;
Â  Â  Â  cursor: pointer;
Â  Â  }

Â  Â  #flashMessage {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 40%;
Â  Â  Â  left: 50%;
Â  Â  Â  transform: translate(-50%, -50%) scale(0.8);
Â  Â  Â  font-size: 5rem;
Â  Â  Â  opacity: 0;
Â  Â  Â  transition: opacity 0.4s ease, transform 0.4s ease;
Â  Â  Â  pointer-events: none;
Â  Â  Â  z-index: 999;
Â  Â  Â  text-shadow: 2px 2px 20px rgba(0,0,0,0.6);
Â  Â  }

Â  Â  #flashMessage.show {
Â  Â  Â  opacity: 1;
Â  Â  Â  transform: translate(-50%, -50%) scale(1.2);
Â  Â  }
Â  </style>
</head>
<body>
Â  <h1><span id="title-flame">â¤ï¸â€ğŸ”¥</span> ClueMatch</h1>
Â  <div id="instructions">Swipe right for YES, left for NO, down for MAYBE</div>
Â  <div id="progress"><div id="progressBar"></div></div>
Â  <div id="flashMessage"></div>

Â  <div id="card" style="display:none;"></div>
Â  <div id="buttons">
Â  Â  <button id="btnYes" onclick="animateSwipe('right', () => recordAssessment('Yes'))">Yes</button>
Â  Â  <button id="btnNo" onclick="animateSwipe('left', () => recordAssessment('No'))">No</button>
Â  Â  <button id="btnMaybe" onclick="animateSwipe('down', () => recordAssessment('Maybe'))">Maybe</button>
Â  Â  <button id="btnUndo" onclick="undoAssessment()">Undo</button>
Â  </div>
Â  <button id="exportBtn" onclick="exportCSV()">Download Reviewed CSV</button>

Â  <script>
Â  Â  let clues = [];
Â  Â  let current = 0;
Â  Â  const history = [];
Â  Â  const card = document.getElementById("card");
Â  Â  const flash = document.getElementById("flashMessage");
Â  Â  const progressBar = document.getElementById("progressBar");
Â  Â  const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSsSUD7PgliCuhNkFFA3nyjes14LHlg1Gp2wuLlG5DU6FIp4CwP0lbrmGLuGe_DlhlbdM6fh_xwb2sZ/pub?output=csv";

Â  Â  function loadSheet() {
Â  Â  Â  const proxy = "https://corsproxy.io/?";
Â  Â  Â  Papa.parse(proxy + sheetUrl, {
Â  Â  Â  Â  download: true,
Â  Â  Â  Â  header: true,
Â  Â  Â  Â  complete: results => {
Â  Â  Â  Â  Â  clues = results.data.filter(row => row.Clue && row.Answer && row.Writer);
Â  Â  Â  Â  Â  current = 0;
Â  Â  Â  Â  Â  history.length = 0;
Â  Â  Â  Â  Â  updateProgress();
Â  Â  Â  Â  Â  showNext();
Â  Â  Â  Â  },
Â  Â  Â  Â  error: err => alert("Error loading sheet: " + err.message)
Â  Â  Â  });
Â  Â  }

Â  Â  function updateProgress() {
Â  Â  Â  const percent = (current / clues.length) * 100;
Â  Â  Â  progressBar.style.width = percent + "%";
Â  Â  }

Â  Â  function showNext() {
Â  Â  Â  if (current >= clues.length) {
Â  Â  Â  Â  card.innerHTML = "<strong>All done!</strong>";
Â  Â  Â  Â  card.style.display = "block";
Â  Â  Â  Â  document.getElementById("buttons").style.display = "none";
Â  Â  Â  Â  progressBar.style.width = "100%";
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  const clue = clues[current];
Â  Â  Â  card.innerHTML = `
Â  Â  Â  Â  <p>${clue.Clue}</p>
Â  Â  Â  Â  <p><strong>Answer:</strong> <span id="answer" onclick="toggleAnswer(this)">â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ</span></p>
Â  Â  Â  Â  <p id="writer">${clue.Writer}</p>
Â  Â  Â  `;
Â  Â  Â  card.style.display = "block";

Â  Â  Â  // Reset classes and force reflow to restart animation
Â  Â  Â  card.className = '';
Â  Â  Â  // Set card to start position (off-screen right) before adding 'enter'
Â  Â  Â  card.style.transform = 'translateX(100%) scale(0.85)';
Â  Â  Â  card.style.opacity = '0';
Â  Â  Â  void card.offsetWidth; // Force reflow
Â  Â  Â  card.classList.add('enter');
Â  Â  Â  updateProgress();
Â  Â  }

Â  Â  function toggleAnswer(el) {
Â  Â  Â  if (el.style.color === "black") {
Â  Â  Â  Â  el.style.color = "white";
Â  Â  Â  Â  el.style.background = "none";
Â  Â  Â  Â  el.textContent = clues[current].Answer;
Â  Â  Â  } else {
Â  Â  Â  Â  el.style.color = "black";
Â  Â  Â  Â  el.style.background = "black";
Â  Â  Â  Â  el.textContent = "â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ";
Â  Â  Â  }
Â  Â  }

Â  Â  function flashMessage(emoji) {
Â  Â  Â  flash.textContent = emoji;
Â  Â  Â  flash.classList.add("show");
Â  Â  Â  setTimeout(() => flash.classList.remove("show"), 500);
Â  Â  }

Â  Â  function animateSwipe(direction, callback) {
Â  Â  Â  card.classList.add(`swipe-${direction}`);
Â  Â  Â  flashMessage(
Â  Â  Â  Â  direction === "right" ? "âœ…" :
Â  Â  Â  Â  direction === "left" ? "âŒ" :
Â  Â  Â  Â  "ğŸ”§"
Â  Â  Â  );
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  card.classList.remove(`swipe-${direction}`);
Â  Â  Â  Â  callback();
Â  Â  Â  }, 400);
Â  Â  }

Â  Â  function recordAssessment(value) {
Â  Â  Â  if (current >= clues.length) return;
Â  Â  Â  clues[current].Assessment = value;
Â  Â  Â  history.push(current);
Â  Â  Â  current++;
Â  Â  Â  showNext();
Â  Â  Â  updateProgress();
Â  Â  }

Â  Â  function undoAssessment() {
Â  Â  Â  if (history.length === 0) return;
Â  Â  Â  current = history.pop();
Â  Â  Â  showNext();
Â  Â  Â  updateProgress();
Â  Â  }

Â  Â  function exportCSV() {
Â  Â  Â  const csv = Papa.unparse(clues);
Â  Â  Â  const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
Â  Â  Â  const link = document.createElement("a");
Â  Â  Â  link.href = URL.createObjectURL(blob);
Â  Â  Â  link.download = "reviewed_clues.csv";
Â  Â  Â  link.click();
Â  Â  }

Â  Â  // Swipe detection
Â  Â  const mc = new Hammer(document.body);
Â  Â  mc.get("swipe").set({ direction: Hammer.DIRECTION_ALL });
Â  Â  mc.on("swipeleft", () => animateSwipe("left", () => recordAssessment("No")));
Â  Â  mc.on("swiperight", () => animateSwipe("right", () => recordAssessment("Yes")));
Â  Â  mc.on("swipedown", () => animateSwipe("down", () => recordAssessment("Maybe")));

Â  Â  window.onload = loadSheet;
Â  </script>
</body>
</html>
